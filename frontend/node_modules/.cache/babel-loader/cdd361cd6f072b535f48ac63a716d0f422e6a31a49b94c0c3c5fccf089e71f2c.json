{"ast":null,"code":"var _jsxFileName = \"D:\\\\Nico-s-Auto-verwaltung\\\\frontend\\\\src\\\\components\\\\Bookings.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/de';\nimport { Container, Box, Paper, Grid, Typography, Divider, CircularProgress, Snackbar, Alert, Table, TableHead, TableBody, TableRow, TableCell, Button, Stack, Card, CardContent, Chip, IconButton } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndayjs.locale('de');\n\n// Backend-URL - direkt angepasst\nconst API_URL = 'http://localhost:5000';\n\n// Fallback-Fahrzeuge, falls Backend nicht erreichbar\nconst FALLBACK_VEHICLES = [{\n  id: '1',\n  modell: 'VW Golf',\n  kennzeichen: 'ERB-AB 123',\n  displayName: 'VW Golf / ERB-AB 123'\n}, {\n  id: '2',\n  modell: 'Audi A5',\n  kennzeichen: 'ERB-CD 456',\n  displayName: 'Audi A5 / ERB-CD 456'\n}, {\n  id: '3',\n  modell: 'McLaren 540c',\n  kennzeichen: 'ERB-RM 229',\n  displayName: 'McLaren 540c / ERB-RM 229'\n}];\n\n// Lokalen Speicher verwalten\nconst getLocalBookings = () => {\n  try {\n    const saved = localStorage.getItem('localBookings');\n    if (saved) {\n      return JSON.parse(saved);\n    }\n  } catch (err) {\n    console.error(\"Fehler beim Lesen lokaler Buchungen:\", err);\n  }\n\n  // Standard-Buchung, falls keine gespeichert sind\n  return [{\n    id: 'local-1',\n    vehicle_id: '3',\n    vehicle_name: 'McLaren 540c / ERB-RM 229',\n    employee_name: 'Max Mustermann',\n    department: 'Vertrieb',\n    purpose: 'Kundenbesuch',\n    start_date: new Date(Date.now() - 86400000).toISOString(),\n    // Gestern\n    end_date: new Date(Date.now() + 172800000).toISOString(),\n    // In 2 Tagen\n    status: 'Reserviert',\n    notes: 'Demo-Buchung (lokal gespeichert)'\n  }];\n};\n\n// Lokale Buchungen speichern\nconst saveLocalBookings = bookings => {\n  try {\n    localStorage.setItem('localBookings', JSON.stringify(bookings));\n  } catch (err) {\n    console.error(\"Fehler beim Speichern lokaler Buchungen:\", err);\n  }\n};\nfunction Bookings() {\n  _s();\n  // Zustandsvariablen\n  const [loading, setLoading] = useState(true);\n  const [loadingVehicles, setLoadingVehicles] = useState(true);\n  const [vehicles, setVehicles] = useState([]);\n  const [bookings, setBookings] = useState([]);\n  const [error, setError] = useState('');\n  const [backendStatus, setBackendStatus] = useState('Verbindung wird geprüft...');\n  const [showAlert, setShowAlert] = useState(false);\n  const [alertMessage, setAlertMessage] = useState('');\n  const [alertSeverity, setAlertSeverity] = useState('info');\n  const [localMode, setLocalMode] = useState(true); // Standardmäßig lokalen Modus verwenden\n  const [showForm, setShowForm] = useState(false);\n\n  // Formular-Zustand\n  const [formData, setFormData] = useState({\n    vehicle_id: '',\n    employee_name: '',\n    department: '',\n    purpose: '',\n    start_date: dayjs(),\n    end_date: dayjs().add(1, 'day'),\n    status: 'Reserviert',\n    notes: ''\n  });\n\n  // Formularvalidierung\n  const [formErrors, setFormErrors] = useState({});\n\n  // Bearbeitung\n  const [editingId, setEditingId] = useState(null);\n\n  // State für lokale Buchungen\n  const [localBookings, setLocalBookings] = useState(getLocalBookings());\n\n  // Laden aller Daten beim Initialisieren der Komponente\n  useEffect(() => {\n    console.log(\"Bookings-Komponente wird initialisiert - Lade Daten\");\n    checkBackendConnection();\n    loadFallbackVehicles(); // Lade sofort Fallback-Daten\n    loadAllData();\n  }, []);\n\n  // Lokale Buchungen speichern, wenn sie sich ändern\n  useEffect(() => {\n    saveLocalBookings(localBookings);\n  }, [localBookings]);\n\n  // Alle Daten laden, je nach Verbindungsstatus\n  const loadAllData = async () => {\n    if (localMode) {\n      loadLocalData();\n    } else {\n      try {\n        await Promise.all([loadVehicles(), loadBackendBookings()]);\n      } catch (err) {\n        console.error(\"Fehler beim Laden der Daten, wechsle in lokalen Modus:\", err);\n        setLocalMode(true);\n        loadLocalData();\n      }\n    }\n  };\n\n  // Lokale Daten laden (schnell und zuverlässig)\n  const loadLocalData = () => {\n    setLoading(true);\n    console.log(\"Lade lokale Daten\");\n\n    // Lade Fahrzeuge\n    setVehicles(FALLBACK_VEHICLES);\n    setLoadingVehicles(false);\n\n    // Lade Buchungen aus localStorage\n    const storedBookings = getLocalBookings();\n\n    // Formatiere die Buchungen für die Anzeige\n    const formattedBookings = storedBookings.map(booking => ({\n      ...booking,\n      start_date: dayjs(booking.start_date),\n      end_date: dayjs(booking.end_date)\n    }));\n    setBookings(formattedBookings);\n    setLoading(false);\n    setBackendStatus('Lokaler Modus (Backend nicht erreichbar)');\n    showNotification(\"Lokaler Modus aktiv - Änderungen werden dauerhaft im Browser gespeichert\", \"info\");\n  };\n\n  // Backend-Verbindung überprüfen\n  const checkBackendConnection = async () => {\n    try {\n      const response = await fetch(`${API_URL}/api/vehicles`, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        },\n        mode: 'cors',\n        cache: 'no-cache'\n      });\n      if (response.ok) {\n        setBackendStatus('Verbunden');\n        setLocalMode(false);\n        console.log(\"Backend-Verbindung erfolgreich hergestellt\");\n      } else {\n        setBackendStatus(`Fehler: ${response.status} ${response.statusText}`);\n        setLocalMode(true);\n        console.error(\"Backend-Verbindung fehlgeschlagen:\", response.status, response.statusText);\n      }\n    } catch (error) {\n      setBackendStatus('Keine Verbindung');\n      setLocalMode(true);\n      console.error(\"Backend nicht erreichbar:\", error.message);\n      showNotification(\"Backend-Server nicht erreichbar. Lokaler Modus aktiviert.\", \"warning\");\n    }\n  };\n\n  // Fahrzeuge vom Backend laden\n  const loadVehicles = async () => {\n    console.log(\"Versuche Fahrzeuge vom Server zu laden...\");\n    setLoadingVehicles(true);\n    try {\n      const response = await fetch(`${API_URL}/api/vehicles`, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        },\n        mode: 'cors',\n        cache: 'no-cache'\n      });\n      if (!response.ok) {\n        console.warn(`Server-Fehler beim Laden der Fahrzeuge: ${response.status}`);\n        loadFallbackVehicles();\n        return;\n      }\n      const data = await response.json();\n      console.log(\"Server-Fahrzeugdaten:\", data);\n      if (Array.isArray(data) && data.length > 0) {\n        const formattedVehicles = data.map(vehicle => {\n          var _vehicle$id;\n          return {\n            id: ((_vehicle$id = vehicle.id) === null || _vehicle$id === void 0 ? void 0 : _vehicle$id.toString()) || '',\n            modell: vehicle.modell || 'Unbekannt',\n            kennzeichen: vehicle.kennzeichen || 'Unbekannt',\n            displayName: `${vehicle.modell || 'Unbekannt'} / ${vehicle.kennzeichen || 'Unbekannt'}`\n          };\n        });\n        console.log(`${formattedVehicles.length} Fahrzeuge geladen`);\n        setVehicles(formattedVehicles);\n      } else {\n        console.warn(\"Keine Fahrzeuge vom Server erhalten, verwende Fallback-Daten\");\n        loadFallbackVehicles();\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Laden der Fahrzeuge:\", error);\n      loadFallbackVehicles();\n    } finally {\n      setLoadingVehicles(false);\n    }\n  };\n\n  // Fallback-Fahrzeuge laden wenn Backend nicht verfügbar\n  const loadFallbackVehicles = () => {\n    console.log(\"Verwende Fallback-Fahrzeuge\");\n    setVehicles(FALLBACK_VEHICLES);\n    setLoadingVehicles(false);\n  };\n\n  // Buchungen vom Backend laden\n  const loadBackendBookings = async () => {\n    console.log(\"Versuche Buchungen vom Server zu laden...\");\n    setLoading(true);\n    try {\n      const response = await fetch(`${API_URL}/api/bookings`, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        },\n        mode: 'cors',\n        cache: 'no-cache'\n      });\n      if (!response.ok) {\n        console.warn(`Server-Fehler beim Laden der Buchungen: ${response.status}`);\n        throw new Error(`Server antwortet mit ${response.status}`);\n      }\n      const data = await response.json();\n      console.log(\"Server-Buchungsdaten:\", data);\n      if (Array.isArray(data)) {\n        const formattedBookings = data.map(booking => ({\n          id: booking.id,\n          vehicle_id: booking.vehicle_id,\n          vehicle_name: findVehicleName(booking.vehicle_id),\n          start_date: dayjs(booking.start_date || booking.startzeit),\n          end_date: dayjs(booking.end_date || booking.endzeit),\n          employee_name: booking.mitarbeiter || booking.employee_name || '',\n          department: booking.abteilung || booking.department || '',\n          purpose: booking.zweck || booking.purpose || '',\n          status: booking.status || 'Reserviert',\n          notes: booking.notizen || booking.notes || ''\n        }));\n        console.log(`${formattedBookings.length} Buchungen geladen`);\n        setBookings(formattedBookings);\n      } else {\n        console.warn(\"Keine Buchungen vom Server erhalten oder unerwartetes Format\");\n        throw new Error(\"Unerwartetes Datenformat\");\n      }\n    } catch (error) {\n      console.error(\"Fehler beim Laden der Buchungen, wechsle in lokalen Modus:\", error);\n      setLocalMode(true);\n      loadLocalData();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Findet den Fahrzeugnamen anhand der ID\n  const findVehicleName = vehicleId => {\n    const vehicle = vehicles.find(v => v.id === vehicleId);\n    return vehicle ? vehicle.displayName : 'Unbekanntes Fahrzeug';\n  };\n\n  // Form Change Handler\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Fehler zurücksetzen wenn Feld geändert wird\n    if (formErrors[name]) {\n      setFormErrors(prev => ({\n        ...prev,\n        [name]: null\n      }));\n    }\n  };\n\n  // Datumsfeld-Handler\n  const handleDateChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n\n    // Fehler zurücksetzen wenn Feld geändert wird\n    if (formErrors[field]) {\n      setFormErrors(prev => ({\n        ...prev,\n        [field]: null\n      }));\n    }\n  };\n\n  // Formular zurücksetzen\n  const resetForm = () => {\n    setFormData({\n      vehicle_id: '',\n      employee_name: '',\n      department: '',\n      purpose: '',\n      start_date: dayjs(),\n      end_date: dayjs().add(1, 'day'),\n      status: 'Reserviert',\n      notes: ''\n    });\n    setFormErrors({});\n    setEditingId(null);\n  };\n\n  // Formular validieren\n  const validateForm = () => {\n    const errors = {};\n    if (!formData.vehicle_id) {\n      errors.vehicle_id = 'Bitte ein Fahrzeug auswählen';\n    }\n    if (!formData.employee_name) {\n      errors.employee_name = 'Bitte einen Mitarbeiternamen eingeben';\n    }\n    if (!formData.purpose) {\n      errors.purpose = 'Bitte einen Verwendungszweck angeben';\n    }\n    if (!formData.start_date) {\n      errors.start_date = 'Bitte ein Startdatum wählen';\n    }\n    if (!formData.end_date) {\n      errors.end_date = 'Bitte ein Enddatum wählen';\n    } else if (formData.start_date && formData.end_date.isBefore(formData.start_date)) {\n      errors.end_date = 'Das Enddatum muss nach dem Startdatum liegen';\n    }\n    return errors;\n  };\n\n  // Form Submit Handler\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log(\"Formular wird abgesendet mit Daten:\", formData);\n\n    // Formular validieren\n    const errors = validateForm();\n    if (Object.keys(errors).length > 0) {\n      setFormErrors(errors);\n      return;\n    }\n    setLoading(true);\n    if (localMode) {\n      // Lokale Speicherung\n      handleLocalSave();\n    } else {\n      try {\n        await handleBackendSave();\n      } catch (error) {\n        console.error(\"Backend-Speicherung fehlgeschlagen, verwende lokale Speicherung:\", error);\n        handleLocalSave();\n      }\n    }\n    setLoading(false);\n  };\n\n  // Lokale Speicherung einer Buchung\n  const handleLocalSave = () => {\n    const localId = editingId && editingId.startsWith('local-') ? editingId : `local-${Date.now()}`;\n    const newBooking = {\n      id: localId,\n      vehicle_id: formData.vehicle_id,\n      vehicle_name: findVehicleName(formData.vehicle_id),\n      employee_name: formData.employee_name,\n      department: formData.department,\n      purpose: formData.purpose,\n      start_date: formData.start_date.toISOString(),\n      end_date: formData.end_date.toISOString(),\n      status: formData.status,\n      notes: formData.notes\n    };\n\n    // Aktualisiere die lokalen Buchungen\n    if (editingId && editingId.startsWith('local-')) {\n      // Buchung aktualisieren\n      const updatedBookings = localBookings.map(booking => booking.id === editingId ? newBooking : booking);\n      setLocalBookings(updatedBookings);\n    } else {\n      // Neue Buchung hinzufügen\n      setLocalBookings([...localBookings, newBooking]);\n    }\n\n    // Aktualisiere den Anzeige-State (formatiert)\n    const formattedBookings = [...localBookings, editingId ? null : newBooking].filter(Boolean).map(booking => ({\n      ...booking,\n      start_date: dayjs(booking.start_date),\n      end_date: dayjs(booking.end_date)\n    }));\n    if (editingId) {\n      // Wenn wir bearbeiten, müssen wir die neue Version verwenden\n      const bookingIndex = formattedBookings.findIndex(b => b.id === editingId);\n      if (bookingIndex >= 0) {\n        formattedBookings[bookingIndex] = {\n          ...newBooking,\n          start_date: dayjs(newBooking.start_date),\n          end_date: dayjs(newBooking.end_date)\n        };\n      }\n    }\n    setBookings(formattedBookings);\n    showNotification(editingId ? \"Buchung dauerhaft aktualisiert\" : \"Buchung dauerhaft gespeichert\", \"success\");\n    resetForm();\n  };\n\n  // Backend-Speicherung einer Buchung\n  const handleBackendSave = async () => {\n    // Anpassen der Daten an das Backend-Schema\n    const bookingToSave = {\n      vehicle_id: formData.vehicle_id,\n      startzeit: formData.start_date.toISOString(),\n      endzeit: formData.end_date.toISOString(),\n      status: formData.status || 'Reserviert',\n      zweck: formData.purpose || '',\n      mitarbeiter: formData.employee_name || '',\n      abteilung: formData.department || ''\n    };\n\n    // Buchung speichern\n    const url = editingId && !editingId.startsWith('local-') ? `${API_URL}/api/bookings/${editingId}` : `${API_URL}/api/bookings`;\n    const method = editingId && !editingId.startsWith('local-') ? 'PUT' : 'POST';\n    console.log(`${method}-Anfrage an ${url}`);\n    const response = await fetch(url, {\n      method: method,\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      mode: 'cors',\n      cache: 'no-cache',\n      body: JSON.stringify(bookingToSave)\n    });\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(\"Server-Fehler:\", response.status, errorText);\n      throw new Error(`Server-Fehler: ${response.status} ${errorText}`);\n    }\n    const result = await response.json();\n    console.log(\"Server-Antwort:\", result);\n    showNotification(editingId ? \"Buchung aktualisiert\" : \"Neue Buchung erstellt\", \"success\");\n    resetForm();\n    await loadBackendBookings();\n  };\n\n  // Buchung löschen\n  const handleDelete = async id => {\n    if (!window.confirm(\"Möchten Sie diese Buchung wirklich löschen?\")) {\n      return;\n    }\n    setLoading(true);\n\n    // Lokale Buchung löschen\n    if (id.startsWith('local-') || localMode) {\n      console.log(\"Lösche lokale Buchung:\", id);\n      const updatedBookings = localBookings.filter(booking => booking.id !== id);\n      setLocalBookings(updatedBookings);\n\n      // Aktualisiere State\n      const formattedBookings = updatedBookings.map(booking => ({\n        ...booking,\n        start_date: dayjs(booking.start_date),\n        end_date: dayjs(booking.end_date)\n      }));\n      setBookings(formattedBookings);\n      showNotification(\"Buchung dauerhaft gelöscht\", \"success\");\n      setLoading(false);\n      return;\n    }\n\n    // Backend-Buchung löschen\n    try {\n      console.log(`DELETE ${API_URL}/api/bookings/${id}`);\n      const response = await fetch(`${API_URL}/api/bookings/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        mode: 'cors',\n        cache: 'no-cache'\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Fehler beim Löschen der Buchung: ${response.status} - ${errorText}`);\n      }\n      showNotification(\"Buchung erfolgreich gelöscht\", \"success\");\n      await loadBackendBookings();\n    } catch (error) {\n      console.error(\"Fehler beim Löschen der Buchung:\", error);\n      showNotification(`Fehler beim Löschen der Buchung: ${error.message}`, \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Buchung bearbeiten\n  const handleEdit = booking => {\n    console.log(\"Bearbeite Buchung:\", booking);\n    setEditingId(booking.id);\n    setFormData({\n      vehicle_id: booking.vehicle_id || '',\n      employee_name: booking.employee_name || '',\n      department: booking.department || '',\n      purpose: booking.purpose || '',\n      start_date: dayjs(booking.start_date),\n      end_date: dayjs(booking.end_date),\n      status: booking.status || 'Reserviert',\n      notes: booking.notes || ''\n    });\n    setShowForm(true);\n  };\n\n  // Benachrichtigung anzeigen\n  const showNotification = (message, severity = 'info') => {\n    setAlertMessage(message);\n    setAlertSeverity(severity);\n    setShowAlert(true);\n  };\n\n  // Modus wechseln zwischen lokal und Backend\n  const toggleMode = () => {\n    const newMode = !localMode;\n    setLocalMode(newMode);\n    if (newMode) {\n      setBackendStatus('Lokaler Modus (manuell aktiviert)');\n      loadLocalData();\n    } else {\n      checkBackendConnection();\n      loadAllData();\n    }\n    showNotification(newMode ? \"Lokaler Modus aktiviert - Änderungen werden dauerhaft im Browser gespeichert\" : \"Backend-Modus aktiviert - Verbindung zum Server wird hergestellt\", \"info\");\n  };\n\n  // Render-Funktion für Formularsicht\n  if (showForm) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        py: 4,\n        position: 'relative',\n        overflow: 'visible'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 4,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2\n        },\n        children: [localMode && backendStatus !== 'Verbunden' && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"info\",\n          sx: {\n            mb: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Hinweis:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this), \" Buchungen werden im Browser gespeichert, da das Backend nicht erreichbar ist.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            onClick: () => setShowForm(false),\n            sx: {\n              mb: 2\n            },\n            children: \"Zur\\xFCck zur \\xDCbersicht\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          component: \"h1\",\n          gutterBottom: true,\n          children: editingId ? 'Buchung bearbeiten' : 'Neue Buchung erstellen'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 3\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        elevation: 3,\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            component: \"form\",\n            onSubmit: handleSubmit,\n            noValidate: true,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"vehicle_id\",\n                    children: \"Fahrzeug *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 632,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    id: \"vehicle_id\",\n                    name: \"vehicle_id\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.vehicle_id,\n                    onChange: handleInputChange,\n                    required: true,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      disabled: true,\n                      children: \"Bitte w\\xE4hlen\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 643,\n                      columnNumber: 23\n                    }, this), loadingVehicles ? /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      disabled: true,\n                      children: \"Fahrzeuge werden geladen...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 645,\n                      columnNumber: 25\n                    }, this) : vehicles.length > 0 ? vehicles.map(vehicle => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: vehicle.id,\n                      children: vehicle.displayName\n                    }, vehicle.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 648,\n                      columnNumber: 27\n                    }, this)) : /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      disabled: true,\n                      children: \"Keine Fahrzeuge verf\\xFCgbar\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 653,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 635,\n                    columnNumber: 21\n                  }, this), formErrors.vehicle_id && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-2 text-sm text-red-600\",\n                    children: formErrors.vehicle_id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 657,\n                    columnNumber: 23\n                  }, this), !loadingVehicles && vehicles.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-2 text-sm text-red-600\",\n                    children: \"Keine Fahrzeuge gefunden. Bitte f\\xFCgen Sie zuerst Fahrzeuge hinzu.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 662,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"employee_name\",\n                    children: \"Mitarbeiter *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 672,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"employee_name\",\n                    name: \"employee_name\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.employee_name,\n                    onChange: handleInputChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 675,\n                    columnNumber: 21\n                  }, this), formErrors.employee_name && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-2 text-sm text-red-600\",\n                    children: formErrors.employee_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 685,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 671,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"department\",\n                    children: \"Abteilung/Kostenstelle\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 695,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"department\",\n                    name: \"department\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.department,\n                    onChange: handleInputChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 698,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 694,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"purpose\",\n                    children: \"Verwendungszweck *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 712,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"purpose\",\n                    name: \"purpose\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.purpose,\n                    onChange: handleInputChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 715,\n                    columnNumber: 21\n                  }, this), formErrors.purpose && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-2 text-sm text-red-600\",\n                    children: formErrors.purpose\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 725,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 710,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"start_date\",\n                    children: \"Startdatum *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 735,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    id: \"start_date\",\n                    name: \"start_date\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.start_date.format('YYYY-MM-DD'),\n                    onChange: e => {\n                      const newDate = dayjs(e.target.value);\n                      if (newDate.isValid()) {\n                        // Behalte die Uhrzeit bei, ändere nur das Datum\n                        const newDateTime = formData.start_date.year(newDate.year()).month(newDate.month()).date(newDate.date());\n                        handleDateChange('start_date', newDateTime);\n                      }\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 738,\n                    columnNumber: 21\n                  }, this), formErrors.start_date && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-2 text-sm text-red-600\",\n                    children: formErrors.start_date\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 758,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"start_time\",\n                    children: \"Startzeit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 768,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"time\",\n                    id: \"start_time\",\n                    name: \"start_time\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.start_date.format('HH:mm'),\n                    onChange: e => {\n                      const [hours, minutes] = e.target.value.split(':').map(Number);\n                      const newDateTime = formData.start_date.hour(hours).minute(minutes).second(0);\n                      handleDateChange('start_date', newDateTime);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 771,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 767,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 766,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"end_date\",\n                    children: \"Enddatum *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 792,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    id: \"end_date\",\n                    name: \"end_date\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.end_date.format('YYYY-MM-DD'),\n                    onChange: e => {\n                      const newDate = dayjs(e.target.value);\n                      if (newDate.isValid()) {\n                        // Behalte die Uhrzeit bei, ändere nur das Datum\n                        const newDateTime = formData.end_date.year(newDate.year()).month(newDate.month()).date(newDate.date());\n                        handleDateChange('end_date', newDateTime);\n                      }\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 795,\n                    columnNumber: 21\n                  }, this), formErrors.end_date && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-2 text-sm text-red-600\",\n                    children: formErrors.end_date\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 815,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 791,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 790,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"end_time\",\n                    children: \"Endzeit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 825,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"time\",\n                    id: \"end_time\",\n                    name: \"end_time\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.end_date.format('HH:mm'),\n                    onChange: e => {\n                      const [hours, minutes] = e.target.value.split(':').map(Number);\n                      const newDateTime = formData.end_date.hour(hours).minute(minutes).second(0);\n                      handleDateChange('end_date', newDateTime);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 828,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 824,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 823,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"status\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 849,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    id: \"status\",\n                    name: \"status\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.status,\n                    onChange: handleInputChange,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Reserviert\",\n                      children: \"Reserviert\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 859,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Ausgegeben\",\n                      children: \"Ausgegeben\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 860,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Zur\\xFCckgegeben\",\n                      children: \"Zur\\xFCckgegeben\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 861,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 852,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 848,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 847,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-control\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    htmlFor: \"notes\",\n                    children: \"Notizen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 869,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    id: \"notes\",\n                    name: \"notes\",\n                    rows: \"3\",\n                    className: \"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\",\n                    value: formData.notes,\n                    onChange: handleInputChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 872,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 868,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 867,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-end space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    type: \"button\",\n                    onClick: resetForm,\n                    disabled: loading,\n                    variant: \"outlined\",\n                    sx: {\n                      mr: 2\n                    },\n                    children: \"Abbrechen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 886,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    type: \"submit\",\n                    variant: \"contained\",\n                    color: \"primary\",\n                    disabled: loading,\n                    children: loading ? 'Wird gespeichert...' : editingId ? 'Aktualisieren' : 'Buchung erstellen'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 895,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 885,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 884,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 628,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Render-Funktion für Listenansicht\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    sx: {\n      py: 4,\n      position: 'relative',\n      overflow: 'visible'\n    },\n    children: [localMode && backendStatus !== 'Verbunden' && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"info\",\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Hinweis:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 919,\n        columnNumber: 11\n      }, this), \" Buchungen werden im Browser gespeichert, da das Backend nicht erreichbar ist.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 918,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          component: \"h1\",\n          children: \"Buchungsverwaltung\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 925,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 924,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: () => {\n          setEditingId(null);\n          setShowForm(true);\n        },\n        disabled: loading,\n        children: \"Neue Buchung\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 930,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 923,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 3\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 944,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        p: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 951,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 950,\n      columnNumber: 9\n    }, this) : bookings.length === 0 ? /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 4,\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        color: \"text.secondary\",\n        gutterBottom: true,\n        children: \"Keine Buchungen vorhanden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 955,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: () => {\n          setEditingId(null);\n          setShowForm(true);\n        },\n        sx: {\n          mt: 2\n        },\n        disabled: loading,\n        children: \"Erste Buchung erstellen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 958,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 954,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        overflowX: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          sx: {\n            backgroundColor: '#f5f5f5'\n          },\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                children: \"Fahrzeug\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 976,\n                columnNumber: 28\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 976,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                children: \"Zeitraum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 977,\n                columnNumber: 28\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 977,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                children: \"Mitarbeiter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 978,\n                columnNumber: 28\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 978,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                children: \"Zweck\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 979,\n                columnNumber: 28\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 979,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 980,\n                columnNumber: 28\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 980,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                children: \"Aktionen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 981,\n                columnNumber: 42\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 981,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 975,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 974,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: bookings.map(booking => /*#__PURE__*/_jsxDEV(TableRow, {\n            hover: true,\n            sx: booking.id.toString().startsWith('local-') ? {\n              backgroundColor: '#fff8e1'\n            } : {},\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: booking.vehicle_name || 'Unbekanntes Fahrzeug'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 992,\n                columnNumber: 21\n              }, this), booking.id.toString().startsWith('local-') && /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"text.secondary\",\n                children: \"(Lokal gespeichert)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 996,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 991,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: booking.start_date.format('DD.MM.YYYY HH:mm')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1002,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                children: [\"bis \", booking.end_date.format('DD.MM.YYYY HH:mm')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1005,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1001,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: booking.employee_name || 'Nicht angegeben'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1010,\n                columnNumber: 21\n              }, this), booking.department && /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                children: booking.department\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1014,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1009,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: booking.purpose || 'Kein Zweck angegeben'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1020,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1019,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(Chip, {\n                label: booking.status || 'Unbekannt',\n                size: \"small\",\n                color: booking.status === 'Reserviert' ? 'warning' : booking.status === 'Ausgegeben' ? 'success' : 'info',\n                variant: \"outlined\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1025,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1024,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"right\",\n              children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                color: \"primary\",\n                onClick: () => handleEdit(booking),\n                title: \"Bearbeiten\",\n                children: \"E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1034,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                color: \"error\",\n                onClick: () => handleDelete(booking.id),\n                title: \"L\\xF6schen\",\n                children: \"X\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1042,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1033,\n              columnNumber: 19\n            }, this)]\n          }, booking.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 986,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 984,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 973,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 972,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: showAlert,\n      autoHideDuration: 6000,\n      onClose: () => setShowAlert(false),\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      sx: {\n        zIndex: 10000\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: () => setShowAlert(false),\n        severity: alertSeverity,\n        sx: {\n          width: '100%'\n        },\n        children: alertMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1066,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1059,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 915,\n    columnNumber: 5\n  }, this);\n}\n_s(Bookings, \"YpsbgdeyfSP5u5aUU6Bka1Mv5Y4=\");\n_c = Bookings;\nexport default Bookings;\nvar _c;\n$RefreshReg$(_c, \"Bookings\");","map":{"version":3,"names":["React","useState","useEffect","dayjs","Container","Box","Paper","Grid","Typography","Divider","CircularProgress","Snackbar","Alert","Table","TableHead","TableBody","TableRow","TableCell","Button","Stack","Card","CardContent","Chip","IconButton","jsxDEV","_jsxDEV","locale","API_URL","FALLBACK_VEHICLES","id","modell","kennzeichen","displayName","getLocalBookings","saved","localStorage","getItem","JSON","parse","err","console","error","vehicle_id","vehicle_name","employee_name","department","purpose","start_date","Date","now","toISOString","end_date","status","notes","saveLocalBookings","bookings","setItem","stringify","Bookings","_s","loading","setLoading","loadingVehicles","setLoadingVehicles","vehicles","setVehicles","setBookings","setError","backendStatus","setBackendStatus","showAlert","setShowAlert","alertMessage","setAlertMessage","alertSeverity","setAlertSeverity","localMode","setLocalMode","showForm","setShowForm","formData","setFormData","add","formErrors","setFormErrors","editingId","setEditingId","localBookings","setLocalBookings","log","checkBackendConnection","loadFallbackVehicles","loadAllData","loadLocalData","Promise","all","loadVehicles","loadBackendBookings","storedBookings","formattedBookings","map","booking","showNotification","response","fetch","method","headers","mode","cache","ok","statusText","message","warn","data","json","Array","isArray","length","formattedVehicles","vehicle","_vehicle$id","toString","Error","findVehicleName","startzeit","endzeit","mitarbeiter","abteilung","zweck","notizen","vehicleId","find","v","handleInputChange","e","name","value","target","prev","handleDateChange","field","resetForm","validateForm","errors","isBefore","handleSubmit","preventDefault","Object","keys","handleLocalSave","handleBackendSave","localId","startsWith","newBooking","updatedBookings","filter","Boolean","bookingIndex","findIndex","b","bookingToSave","url","body","errorText","text","result","handleDelete","window","confirm","handleEdit","severity","toggleMode","newMode","maxWidth","sx","py","position","overflow","children","mb","display","flexDirection","gap","fileName","_jsxFileName","lineNumber","columnNumber","justifyContent","alignItems","variant","onClick","component","gutterBottom","elevation","onSubmit","noValidate","container","spacing","item","xs","sm","className","htmlFor","onChange","required","disabled","type","format","newDate","isValid","newDateTime","year","month","date","hours","minutes","split","Number","hour","minute","second","rows","mr","color","p","textAlign","mt","overflowX","backgroundColor","align","hover","label","size","title","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","zIndex","width","_c","$RefreshReg$"],"sources":["D:/Nico-s-Auto-verwaltung/frontend/src/components/Bookings.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport dayjs from 'dayjs';\r\nimport 'dayjs/locale/de';\r\nimport { \r\n  Container, Box, Paper, Grid, Typography, \r\n  Divider, CircularProgress, Snackbar, Alert, \r\n  Table, TableHead, TableBody, TableRow, TableCell, \r\n  Button, Stack, Card, CardContent, Chip, IconButton\r\n} from '@mui/material';\r\n\r\ndayjs.locale('de');\r\n\r\n// Backend-URL - direkt angepasst\r\nconst API_URL = 'http://localhost:5000';\r\n\r\n// Fallback-Fahrzeuge, falls Backend nicht erreichbar\r\nconst FALLBACK_VEHICLES = [\r\n  { id: '1', modell: 'VW Golf', kennzeichen: 'ERB-AB 123', displayName: 'VW Golf / ERB-AB 123' },\r\n  { id: '2', modell: 'Audi A5', kennzeichen: 'ERB-CD 456', displayName: 'Audi A5 / ERB-CD 456' },\r\n  { id: '3', modell: 'McLaren 540c', kennzeichen: 'ERB-RM 229', displayName: 'McLaren 540c / ERB-RM 229' }\r\n];\r\n\r\n// Lokalen Speicher verwalten\r\nconst getLocalBookings = () => {\r\n  try {\r\n    const saved = localStorage.getItem('localBookings');\r\n    if (saved) {\r\n      return JSON.parse(saved);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Fehler beim Lesen lokaler Buchungen:\", err);\r\n  }\r\n  \r\n  // Standard-Buchung, falls keine gespeichert sind\r\n  return [\r\n    {\r\n      id: 'local-1',\r\n      vehicle_id: '3',\r\n      vehicle_name: 'McLaren 540c / ERB-RM 229',\r\n      employee_name: 'Max Mustermann',\r\n      department: 'Vertrieb',\r\n      purpose: 'Kundenbesuch',\r\n      start_date: new Date(Date.now() - 86400000).toISOString(), // Gestern\r\n      end_date: new Date(Date.now() + 172800000).toISOString(),  // In 2 Tagen\r\n      status: 'Reserviert',\r\n      notes: 'Demo-Buchung (lokal gespeichert)'\r\n    }\r\n  ];\r\n};\r\n\r\n// Lokale Buchungen speichern\r\nconst saveLocalBookings = (bookings) => {\r\n  try {\r\n    localStorage.setItem('localBookings', JSON.stringify(bookings));\r\n  } catch (err) {\r\n    console.error(\"Fehler beim Speichern lokaler Buchungen:\", err);\r\n  }\r\n};\r\n\r\nfunction Bookings() {\r\n  // Zustandsvariablen\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingVehicles, setLoadingVehicles] = useState(true);\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [bookings, setBookings] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [backendStatus, setBackendStatus] = useState('Verbindung wird geprüft...');\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState('');\r\n  const [alertSeverity, setAlertSeverity] = useState('info');\r\n  const [localMode, setLocalMode] = useState(true); // Standardmäßig lokalen Modus verwenden\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  // Formular-Zustand\r\n  const [formData, setFormData] = useState({\r\n    vehicle_id: '',\r\n    employee_name: '',\r\n    department: '',\r\n    purpose: '',\r\n    start_date: dayjs(),\r\n    end_date: dayjs().add(1, 'day'),\r\n    status: 'Reserviert',\r\n    notes: ''\r\n  });\r\n  \r\n  // Formularvalidierung\r\n  const [formErrors, setFormErrors] = useState({});\r\n  \r\n  // Bearbeitung\r\n  const [editingId, setEditingId] = useState(null);\r\n\r\n  // State für lokale Buchungen\r\n  const [localBookings, setLocalBookings] = useState(getLocalBookings());\r\n\r\n  // Laden aller Daten beim Initialisieren der Komponente\r\n  useEffect(() => {\r\n    console.log(\"Bookings-Komponente wird initialisiert - Lade Daten\");\r\n    checkBackendConnection();\r\n    loadFallbackVehicles(); // Lade sofort Fallback-Daten\r\n    loadAllData();\r\n  }, []);\r\n\r\n  // Lokale Buchungen speichern, wenn sie sich ändern\r\n  useEffect(() => {\r\n    saveLocalBookings(localBookings);\r\n  }, [localBookings]);\r\n\r\n  // Alle Daten laden, je nach Verbindungsstatus\r\n  const loadAllData = async () => {\r\n    if (localMode) {\r\n      loadLocalData();\r\n    } else {\r\n      try {\r\n        await Promise.all([loadVehicles(), loadBackendBookings()]);\r\n      } catch (err) {\r\n        console.error(\"Fehler beim Laden der Daten, wechsle in lokalen Modus:\", err);\r\n        setLocalMode(true);\r\n        loadLocalData();\r\n      }\r\n    }\r\n  };\r\n\r\n  // Lokale Daten laden (schnell und zuverlässig)\r\n  const loadLocalData = () => {\r\n    setLoading(true);\r\n    console.log(\"Lade lokale Daten\");\r\n    \r\n    // Lade Fahrzeuge\r\n    setVehicles(FALLBACK_VEHICLES);\r\n    setLoadingVehicles(false);\r\n    \r\n    // Lade Buchungen aus localStorage\r\n    const storedBookings = getLocalBookings();\r\n    \r\n    // Formatiere die Buchungen für die Anzeige\r\n    const formattedBookings = storedBookings.map(booking => ({\r\n      ...booking,\r\n      start_date: dayjs(booking.start_date),\r\n      end_date: dayjs(booking.end_date)\r\n    }));\r\n    \r\n    setBookings(formattedBookings);\r\n    setLoading(false);\r\n    setBackendStatus('Lokaler Modus (Backend nicht erreichbar)');\r\n    showNotification(\"Lokaler Modus aktiv - Änderungen werden dauerhaft im Browser gespeichert\", \"info\");\r\n  };\r\n\r\n  // Backend-Verbindung überprüfen\r\n  const checkBackendConnection = async () => {\r\n    try {\r\n      const response = await fetch(`${API_URL}/api/vehicles`, { \r\n        method: 'GET',\r\n        headers: { 'Accept': 'application/json' },\r\n        mode: 'cors',\r\n        cache: 'no-cache'\r\n      });\r\n      \r\n      if (response.ok) {\r\n        setBackendStatus('Verbunden');\r\n        setLocalMode(false);\r\n        console.log(\"Backend-Verbindung erfolgreich hergestellt\");\r\n      } else {\r\n        setBackendStatus(`Fehler: ${response.status} ${response.statusText}`);\r\n        setLocalMode(true);\r\n        console.error(\"Backend-Verbindung fehlgeschlagen:\", response.status, response.statusText);\r\n      }\r\n    } catch (error) {\r\n      setBackendStatus('Keine Verbindung');\r\n      setLocalMode(true);\r\n      console.error(\"Backend nicht erreichbar:\", error.message);\r\n      showNotification(\"Backend-Server nicht erreichbar. Lokaler Modus aktiviert.\", \"warning\");\r\n    }\r\n  };\r\n\r\n  // Fahrzeuge vom Backend laden\r\n  const loadVehicles = async () => {\r\n    console.log(\"Versuche Fahrzeuge vom Server zu laden...\");\r\n    setLoadingVehicles(true);\r\n    \r\n    try {\r\n      const response = await fetch(`${API_URL}/api/vehicles`, {\r\n        method: 'GET',\r\n        headers: { 'Accept': 'application/json' },\r\n        mode: 'cors',\r\n        cache: 'no-cache'\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        console.warn(`Server-Fehler beim Laden der Fahrzeuge: ${response.status}`);\r\n        loadFallbackVehicles();\r\n        return;\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log(\"Server-Fahrzeugdaten:\", data);\r\n      \r\n      if (Array.isArray(data) && data.length > 0) {\r\n        const formattedVehicles = data.map(vehicle => ({\r\n          id: vehicle.id?.toString() || '',\r\n          modell: vehicle.modell || 'Unbekannt',\r\n          kennzeichen: vehicle.kennzeichen || 'Unbekannt',\r\n          displayName: `${vehicle.modell || 'Unbekannt'} / ${vehicle.kennzeichen || 'Unbekannt'}`\r\n        }));\r\n        \r\n        console.log(`${formattedVehicles.length} Fahrzeuge geladen`);\r\n        setVehicles(formattedVehicles);\r\n      } else {\r\n        console.warn(\"Keine Fahrzeuge vom Server erhalten, verwende Fallback-Daten\");\r\n        loadFallbackVehicles();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Fehler beim Laden der Fahrzeuge:\", error);\r\n      loadFallbackVehicles();\r\n    } finally {\r\n      setLoadingVehicles(false);\r\n    }\r\n  };\r\n\r\n  // Fallback-Fahrzeuge laden wenn Backend nicht verfügbar\r\n  const loadFallbackVehicles = () => {\r\n    console.log(\"Verwende Fallback-Fahrzeuge\");\r\n    setVehicles(FALLBACK_VEHICLES);\r\n    setLoadingVehicles(false);\r\n  };\r\n\r\n  // Buchungen vom Backend laden\r\n  const loadBackendBookings = async () => {\r\n    console.log(\"Versuche Buchungen vom Server zu laden...\");\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const response = await fetch(`${API_URL}/api/bookings`, {\r\n        method: 'GET',\r\n        headers: { 'Accept': 'application/json' },\r\n        mode: 'cors',\r\n        cache: 'no-cache'\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        console.warn(`Server-Fehler beim Laden der Buchungen: ${response.status}`);\r\n        throw new Error(`Server antwortet mit ${response.status}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log(\"Server-Buchungsdaten:\", data);\r\n      \r\n      if (Array.isArray(data)) {\r\n        const formattedBookings = data.map(booking => ({\r\n          id: booking.id,\r\n          vehicle_id: booking.vehicle_id,\r\n          vehicle_name: findVehicleName(booking.vehicle_id),\r\n          start_date: dayjs(booking.start_date || booking.startzeit),\r\n          end_date: dayjs(booking.end_date || booking.endzeit),\r\n          employee_name: booking.mitarbeiter || booking.employee_name || '',\r\n          department: booking.abteilung || booking.department || '',\r\n          purpose: booking.zweck || booking.purpose || '',\r\n          status: booking.status || 'Reserviert',\r\n          notes: booking.notizen || booking.notes || ''\r\n        }));\r\n        \r\n        console.log(`${formattedBookings.length} Buchungen geladen`);\r\n        setBookings(formattedBookings);\r\n      } else {\r\n        console.warn(\"Keine Buchungen vom Server erhalten oder unerwartetes Format\");\r\n        throw new Error(\"Unerwartetes Datenformat\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Fehler beim Laden der Buchungen, wechsle in lokalen Modus:\", error);\r\n      setLocalMode(true);\r\n      loadLocalData();\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Findet den Fahrzeugnamen anhand der ID\r\n  const findVehicleName = (vehicleId) => {\r\n    const vehicle = vehicles.find(v => v.id === vehicleId);\r\n    return vehicle ? vehicle.displayName : 'Unbekanntes Fahrzeug';\r\n  };\r\n\r\n  // Form Change Handler\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    \r\n    // Fehler zurücksetzen wenn Feld geändert wird\r\n    if (formErrors[name]) {\r\n      setFormErrors(prev => ({ ...prev, [name]: null }));\r\n    }\r\n  };\r\n\r\n  // Datumsfeld-Handler\r\n  const handleDateChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    \r\n    // Fehler zurücksetzen wenn Feld geändert wird\r\n    if (formErrors[field]) {\r\n      setFormErrors(prev => ({ ...prev, [field]: null }));\r\n    }\r\n  };\r\n  \r\n  // Formular zurücksetzen\r\n  const resetForm = () => {\r\n    setFormData({\r\n      vehicle_id: '',\r\n      employee_name: '',\r\n      department: '',\r\n      purpose: '',\r\n      start_date: dayjs(),\r\n      end_date: dayjs().add(1, 'day'),\r\n      status: 'Reserviert',\r\n      notes: ''\r\n    });\r\n    setFormErrors({});\r\n    setEditingId(null);\r\n  };\r\n\r\n  // Formular validieren\r\n  const validateForm = () => {\r\n    const errors = {};\r\n    \r\n    if (!formData.vehicle_id) {\r\n      errors.vehicle_id = 'Bitte ein Fahrzeug auswählen';\r\n    }\r\n    \r\n    if (!formData.employee_name) {\r\n      errors.employee_name = 'Bitte einen Mitarbeiternamen eingeben';\r\n    }\r\n    \r\n    if (!formData.purpose) {\r\n      errors.purpose = 'Bitte einen Verwendungszweck angeben';\r\n    }\r\n    \r\n    if (!formData.start_date) {\r\n      errors.start_date = 'Bitte ein Startdatum wählen';\r\n    }\r\n    \r\n    if (!formData.end_date) {\r\n      errors.end_date = 'Bitte ein Enddatum wählen';\r\n    } else if (formData.start_date && formData.end_date.isBefore(formData.start_date)) {\r\n      errors.end_date = 'Das Enddatum muss nach dem Startdatum liegen';\r\n    }\r\n    \r\n    return errors;\r\n  };\r\n\r\n  // Form Submit Handler\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Formular wird abgesendet mit Daten:\", formData);\r\n    \r\n    // Formular validieren\r\n    const errors = validateForm();\r\n    if (Object.keys(errors).length > 0) {\r\n      setFormErrors(errors);\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    \r\n    if (localMode) {\r\n      // Lokale Speicherung\r\n      handleLocalSave();\r\n    } else {\r\n      try {\r\n        await handleBackendSave();\r\n      } catch (error) {\r\n        console.error(\"Backend-Speicherung fehlgeschlagen, verwende lokale Speicherung:\", error);\r\n        handleLocalSave();\r\n      }\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n  \r\n  // Lokale Speicherung einer Buchung\r\n  const handleLocalSave = () => {\r\n    const localId = editingId && editingId.startsWith('local-') \r\n      ? editingId \r\n      : `local-${Date.now()}`;\r\n      \r\n    const newBooking = {\r\n      id: localId,\r\n      vehicle_id: formData.vehicle_id,\r\n      vehicle_name: findVehicleName(formData.vehicle_id),\r\n      employee_name: formData.employee_name,\r\n      department: formData.department,\r\n      purpose: formData.purpose,\r\n      start_date: formData.start_date.toISOString(),\r\n      end_date: formData.end_date.toISOString(),\r\n      status: formData.status,\r\n      notes: formData.notes\r\n    };\r\n    \r\n    // Aktualisiere die lokalen Buchungen\r\n    if (editingId && editingId.startsWith('local-')) {\r\n      // Buchung aktualisieren\r\n      const updatedBookings = localBookings.map(booking => \r\n        booking.id === editingId ? newBooking : booking\r\n      );\r\n      setLocalBookings(updatedBookings);\r\n    } else {\r\n      // Neue Buchung hinzufügen\r\n      setLocalBookings([...localBookings, newBooking]);\r\n    }\r\n    \r\n    // Aktualisiere den Anzeige-State (formatiert)\r\n    const formattedBookings = [...localBookings, editingId ? null : newBooking]\r\n      .filter(Boolean)\r\n      .map(booking => ({\r\n        ...booking,\r\n        start_date: dayjs(booking.start_date),\r\n        end_date: dayjs(booking.end_date)\r\n      }));\r\n    \r\n    if (editingId) {\r\n      // Wenn wir bearbeiten, müssen wir die neue Version verwenden\r\n      const bookingIndex = formattedBookings.findIndex(b => b.id === editingId);\r\n      if (bookingIndex >= 0) {\r\n        formattedBookings[bookingIndex] = {\r\n          ...newBooking,\r\n          start_date: dayjs(newBooking.start_date),\r\n          end_date: dayjs(newBooking.end_date)\r\n        };\r\n      }\r\n    }\r\n    \r\n    setBookings(formattedBookings);\r\n    showNotification(\r\n      editingId ? \"Buchung dauerhaft aktualisiert\" : \"Buchung dauerhaft gespeichert\", \r\n      \"success\"\r\n    );\r\n    resetForm();\r\n  };\r\n  \r\n  // Backend-Speicherung einer Buchung\r\n  const handleBackendSave = async () => {\r\n    // Anpassen der Daten an das Backend-Schema\r\n    const bookingToSave = {\r\n      vehicle_id: formData.vehicle_id,\r\n      startzeit: formData.start_date.toISOString(),\r\n      endzeit: formData.end_date.toISOString(),\r\n      status: formData.status || 'Reserviert',\r\n      zweck: formData.purpose || '',\r\n      mitarbeiter: formData.employee_name || '',\r\n      abteilung: formData.department || '',\r\n    };\r\n    \r\n    // Buchung speichern\r\n    const url = editingId && !editingId.startsWith('local-')\r\n      ? `${API_URL}/api/bookings/${editingId}`\r\n      : `${API_URL}/api/bookings`;\r\n    \r\n    const method = editingId && !editingId.startsWith('local-') ? 'PUT' : 'POST';\r\n    console.log(`${method}-Anfrage an ${url}`);\r\n    \r\n    const response = await fetch(url, {\r\n      method: method,\r\n      headers: { \r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      mode: 'cors',\r\n      cache: 'no-cache',\r\n      body: JSON.stringify(bookingToSave)\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      console.error(\"Server-Fehler:\", response.status, errorText);\r\n      throw new Error(`Server-Fehler: ${response.status} ${errorText}`);\r\n    }\r\n    \r\n    const result = await response.json();\r\n    console.log(\"Server-Antwort:\", result);\r\n    \r\n    showNotification(\r\n      editingId ? \"Buchung aktualisiert\" : \"Neue Buchung erstellt\", \r\n      \"success\"\r\n    );\r\n    resetForm();\r\n    await loadBackendBookings();\r\n  };\r\n\r\n  // Buchung löschen\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Möchten Sie diese Buchung wirklich löschen?\")) {\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    \r\n    // Lokale Buchung löschen\r\n    if (id.startsWith('local-') || localMode) {\r\n      console.log(\"Lösche lokale Buchung:\", id);\r\n      const updatedBookings = localBookings.filter(booking => booking.id !== id);\r\n      setLocalBookings(updatedBookings);\r\n      \r\n      // Aktualisiere State\r\n      const formattedBookings = updatedBookings.map(booking => ({\r\n        ...booking,\r\n        start_date: dayjs(booking.start_date),\r\n        end_date: dayjs(booking.end_date)\r\n      }));\r\n      \r\n      setBookings(formattedBookings);\r\n      showNotification(\"Buchung dauerhaft gelöscht\", \"success\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    \r\n    // Backend-Buchung löschen\r\n    try {\r\n      console.log(`DELETE ${API_URL}/api/bookings/${id}`);\r\n      const response = await fetch(`${API_URL}/api/bookings/${id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        mode: 'cors',\r\n        cache: 'no-cache'\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        throw new Error(`Fehler beim Löschen der Buchung: ${response.status} - ${errorText}`);\r\n      }\r\n      \r\n      showNotification(\"Buchung erfolgreich gelöscht\", \"success\");\r\n      await loadBackendBookings();\r\n    } catch (error) {\r\n      console.error(\"Fehler beim Löschen der Buchung:\", error);\r\n      showNotification(`Fehler beim Löschen der Buchung: ${error.message}`, \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Buchung bearbeiten\r\n  const handleEdit = (booking) => {\r\n    console.log(\"Bearbeite Buchung:\", booking);\r\n    setEditingId(booking.id);\r\n    setFormData({\r\n      vehicle_id: booking.vehicle_id || '',\r\n      employee_name: booking.employee_name || '',\r\n      department: booking.department || '',\r\n      purpose: booking.purpose || '',\r\n      start_date: dayjs(booking.start_date),\r\n      end_date: dayjs(booking.end_date),\r\n      status: booking.status || 'Reserviert',\r\n      notes: booking.notes || ''\r\n    });\r\n    setShowForm(true);\r\n  };\r\n\r\n  // Benachrichtigung anzeigen\r\n  const showNotification = (message, severity = 'info') => {\r\n    setAlertMessage(message);\r\n    setAlertSeverity(severity);\r\n    setShowAlert(true);\r\n  };\r\n\r\n  // Modus wechseln zwischen lokal und Backend\r\n  const toggleMode = () => {\r\n    const newMode = !localMode;\r\n    setLocalMode(newMode);\r\n    \r\n    if (newMode) {\r\n      setBackendStatus('Lokaler Modus (manuell aktiviert)');\r\n      loadLocalData();\r\n    } else {\r\n      checkBackendConnection();\r\n      loadAllData();\r\n    }\r\n    \r\n    showNotification(\r\n      newMode \r\n        ? \"Lokaler Modus aktiviert - Änderungen werden dauerhaft im Browser gespeichert\" \r\n        : \"Backend-Modus aktiviert - Verbindung zum Server wird hergestellt\",\r\n      \"info\"\r\n    );\r\n  };\r\n\r\n  // Render-Funktion für Formularsicht\r\n  if (showForm) {\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ py: 4, position: 'relative', overflow: 'visible' }}>\r\n        <Box sx={{ mb: 4, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n          {/* Status-Banner wird nur angezeigt, wenn es ein Problem mit dem Backend gibt */}\r\n          {localMode && backendStatus !== 'Verbunden' && (\r\n            <Alert severity=\"info\" sx={{ mb: 1 }}>\r\n              <strong>Hinweis:</strong> Buchungen werden im Browser gespeichert, da das Backend nicht erreichbar ist.\r\n            </Alert>\r\n          )}\r\n          \r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <Button \r\n              variant=\"outlined\" \r\n              onClick={() => setShowForm(false)}\r\n              sx={{ mb: 2 }}\r\n            >\r\n              Zurück zur Übersicht\r\n            </Button>\r\n          </Box>\r\n          \r\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n            {editingId ? 'Buchung bearbeiten' : 'Neue Buchung erstellen'}\r\n          </Typography>\r\n        </Box>\r\n\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mb: 3 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        <Card elevation={3}>\r\n          <CardContent>\r\n            <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n              <Grid container spacing={2}>\r\n                {/* Fahrzeugauswahl */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"vehicle_id\">\r\n                      Fahrzeug *\r\n                    </label>\r\n                    <select\r\n                      id=\"vehicle_id\"\r\n                      name=\"vehicle_id\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.vehicle_id}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                    >\r\n                      <option value=\"\" disabled>Bitte wählen</option>\r\n                      {loadingVehicles ? (\r\n                        <option value=\"\" disabled>Fahrzeuge werden geladen...</option>\r\n                      ) : vehicles.length > 0 ? (\r\n                        vehicles.map(vehicle => (\r\n                          <option key={vehicle.id} value={vehicle.id}>\r\n                            {vehicle.displayName}\r\n                          </option>\r\n                        ))\r\n                      ) : (\r\n                        <option value=\"\" disabled>Keine Fahrzeuge verfügbar</option>\r\n                      )}\r\n                    </select>\r\n                    {formErrors.vehicle_id && (\r\n                      <p className=\"mt-2 text-sm text-red-600\">\r\n                        {formErrors.vehicle_id}\r\n                      </p>\r\n                    )}\r\n                    {!loadingVehicles && vehicles.length === 0 && (\r\n                      <p className=\"mt-2 text-sm text-red-600\">\r\n                        Keine Fahrzeuge gefunden. Bitte fügen Sie zuerst Fahrzeuge hinzu.\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Mitarbeiter */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"employee_name\">\r\n                      Mitarbeiter *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"employee_name\"\r\n                      name=\"employee_name\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.employee_name}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                    />\r\n                    {formErrors.employee_name && (\r\n                      <p className=\"mt-2 text-sm text-red-600\">\r\n                        {formErrors.employee_name}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Abteilung */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"department\">\r\n                      Abteilung/Kostenstelle\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"department\"\r\n                      name=\"department\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.department}\r\n                      onChange={handleInputChange}\r\n                    />\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Zweck */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"purpose\">\r\n                      Verwendungszweck *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"purpose\"\r\n                      name=\"purpose\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.purpose}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                    />\r\n                    {formErrors.purpose && (\r\n                      <p className=\"mt-2 text-sm text-red-600\">\r\n                        {formErrors.purpose}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Startdatum */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"start_date\">\r\n                      Startdatum *\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      id=\"start_date\"\r\n                      name=\"start_date\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.start_date.format('YYYY-MM-DD')}\r\n                      onChange={(e) => {\r\n                        const newDate = dayjs(e.target.value);\r\n                        if(newDate.isValid()) {\r\n                          // Behalte die Uhrzeit bei, ändere nur das Datum\r\n                          const newDateTime = formData.start_date\r\n                            .year(newDate.year())\r\n                            .month(newDate.month())\r\n                            .date(newDate.date());\r\n                          handleDateChange('start_date', newDateTime);\r\n                        }\r\n                      }}\r\n                      required\r\n                    />\r\n                    {formErrors.start_date && (\r\n                      <p className=\"mt-2 text-sm text-red-600\">\r\n                        {formErrors.start_date}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Startzeit */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"start_time\">\r\n                      Startzeit\r\n                    </label>\r\n                    <input\r\n                      type=\"time\"\r\n                      id=\"start_time\"\r\n                      name=\"start_time\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.start_date.format('HH:mm')}\r\n                      onChange={(e) => {\r\n                        const [hours, minutes] = e.target.value.split(':').map(Number);\r\n                        const newDateTime = formData.start_date\r\n                          .hour(hours)\r\n                          .minute(minutes)\r\n                          .second(0);\r\n                        handleDateChange('start_date', newDateTime);\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Enddatum */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"end_date\">\r\n                      Enddatum *\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      id=\"end_date\"\r\n                      name=\"end_date\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.end_date.format('YYYY-MM-DD')}\r\n                      onChange={(e) => {\r\n                        const newDate = dayjs(e.target.value);\r\n                        if(newDate.isValid()) {\r\n                          // Behalte die Uhrzeit bei, ändere nur das Datum\r\n                          const newDateTime = formData.end_date\r\n                            .year(newDate.year())\r\n                            .month(newDate.month())\r\n                            .date(newDate.date());\r\n                          handleDateChange('end_date', newDateTime);\r\n                        }\r\n                      }}\r\n                      required\r\n                    />\r\n                    {formErrors.end_date && (\r\n                      <p className=\"mt-2 text-sm text-red-600\">\r\n                        {formErrors.end_date}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Endzeit */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"end_time\">\r\n                      Endzeit\r\n                    </label>\r\n                    <input\r\n                      type=\"time\"\r\n                      id=\"end_time\"\r\n                      name=\"end_time\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.end_date.format('HH:mm')}\r\n                      onChange={(e) => {\r\n                        const [hours, minutes] = e.target.value.split(':').map(Number);\r\n                        const newDateTime = formData.end_date\r\n                          .hour(hours)\r\n                          .minute(minutes)\r\n                          .second(0);\r\n                        handleDateChange('end_date', newDateTime);\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Status */}\r\n                <Grid item xs={12} sm={6}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"status\">\r\n                      Status\r\n                    </label>\r\n                    <select\r\n                      id=\"status\"\r\n                      name=\"status\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.status}\r\n                      onChange={handleInputChange}\r\n                    >\r\n                      <option value=\"Reserviert\">Reserviert</option>\r\n                      <option value=\"Ausgegeben\">Ausgegeben</option>\r\n                      <option value=\"Zurückgegeben\">Zurückgegeben</option>\r\n                    </select>\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Notizen */}\r\n                <Grid item xs={12}>\r\n                  <div className=\"form-control\">\r\n                    <label className=\"block text-gray-700 font-medium mb-2\" htmlFor=\"notes\">\r\n                      Notizen\r\n                    </label>\r\n                    <textarea\r\n                      id=\"notes\"\r\n                      name=\"notes\"\r\n                      rows=\"3\"\r\n                      className=\"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md p-2 border\"\r\n                      value={formData.notes}\r\n                      onChange={handleInputChange}\r\n                    ></textarea>\r\n                  </div>\r\n                </Grid>\r\n                \r\n                {/* Buttons */}\r\n                <Grid item xs={12}>\r\n                  <div className=\"flex justify-end space-x-3\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      onClick={resetForm}\r\n                      disabled={loading}\r\n                      variant=\"outlined\"\r\n                      sx={{ mr: 2 }}\r\n                    >\r\n                      Abbrechen\r\n                    </Button>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      disabled={loading}\r\n                    >\r\n                      {loading ? 'Wird gespeichert...' : editingId ? 'Aktualisieren' : 'Buchung erstellen'}\r\n                    </Button>\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n            </Box>\r\n          </CardContent>\r\n        </Card>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // Render-Funktion für Listenansicht\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ py: 4, position: 'relative', overflow: 'visible' }}>\r\n      {/* Status-Banner wird nur angezeigt, wenn es ein Problem mit dem Backend gibt */}\r\n      {localMode && backendStatus !== 'Verbunden' && (\r\n        <Alert severity=\"info\" sx={{ mb: 3 }}>\r\n          <strong>Hinweis:</strong> Buchungen werden im Browser gespeichert, da das Backend nicht erreichbar ist.\r\n        </Alert>\r\n      )}\r\n      \r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\r\n        <Box>\r\n          <Typography variant=\"h4\" component=\"h1\">\r\n            Buchungsverwaltung\r\n          </Typography>\r\n        </Box>\r\n        \r\n        <Button \r\n          variant=\"contained\" \r\n          color=\"primary\" \r\n          onClick={() => {\r\n            setEditingId(null);\r\n            setShowForm(true);\r\n          }}\r\n          disabled={loading}\r\n        >\r\n          Neue Buchung\r\n        </Button>\r\n      </Box>\r\n\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {loading ? (\r\n        <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\r\n          <CircularProgress />\r\n        </Box>\r\n      ) : bookings.length === 0 ? (\r\n        <Paper sx={{ p: 4, textAlign: 'center' }}>\r\n          <Typography variant=\"body1\" color=\"text.secondary\" gutterBottom>\r\n            Keine Buchungen vorhanden\r\n          </Typography>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              setEditingId(null);\r\n              setShowForm(true);\r\n            }}\r\n            sx={{ mt: 2 }}\r\n            disabled={loading}\r\n          >\r\n            Erste Buchung erstellen\r\n          </Button>\r\n        </Paper>\r\n      ) : (\r\n        <Paper elevation={3} sx={{ overflowX: 'auto' }}>\r\n          <Table>\r\n            <TableHead sx={{ backgroundColor: '#f5f5f5' }}>\r\n              <TableRow>\r\n                <TableCell><Typography variant=\"subtitle2\">Fahrzeug</Typography></TableCell>\r\n                <TableCell><Typography variant=\"subtitle2\">Zeitraum</Typography></TableCell>\r\n                <TableCell><Typography variant=\"subtitle2\">Mitarbeiter</Typography></TableCell>\r\n                <TableCell><Typography variant=\"subtitle2\">Zweck</Typography></TableCell>\r\n                <TableCell><Typography variant=\"subtitle2\">Status</Typography></TableCell>\r\n                <TableCell align=\"right\"><Typography variant=\"subtitle2\">Aktionen</Typography></TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {bookings.map((booking) => (\r\n                <TableRow \r\n                  key={booking.id} \r\n                  hover\r\n                  sx={booking.id.toString().startsWith('local-') ? { backgroundColor: '#fff8e1' } : {}}\r\n                >\r\n                  <TableCell>\r\n                    <Typography variant=\"body2\">\r\n                      {booking.vehicle_name || 'Unbekanntes Fahrzeug'}\r\n                    </Typography>\r\n                    {booking.id.toString().startsWith('local-') && (\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        (Lokal gespeichert)\r\n                      </Typography>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography variant=\"body2\">\r\n                      {booking.start_date.format('DD.MM.YYYY HH:mm')}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      bis {booking.end_date.format('DD.MM.YYYY HH:mm')}\r\n                    </Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography variant=\"body2\">\r\n                      {booking.employee_name || 'Nicht angegeben'}\r\n                    </Typography>\r\n                    {booking.department && (\r\n                      <Typography variant=\"body2\" color=\"text.secondary\">\r\n                        {booking.department}\r\n                      </Typography>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography variant=\"body2\">\r\n                      {booking.purpose || 'Kein Zweck angegeben'}\r\n                    </Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Chip \r\n                      label={booking.status || 'Unbekannt'} \r\n                      size=\"small\"\r\n                      color={booking.status === 'Reserviert' ? 'warning' : \r\n                             booking.status === 'Ausgegeben' ? 'success' : 'info'}\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      color=\"primary\" \r\n                      onClick={() => handleEdit(booking)}\r\n                      title=\"Bearbeiten\"\r\n                    >\r\n                      E\r\n                    </IconButton>\r\n                    <IconButton \r\n                      size=\"small\" \r\n                      color=\"error\" \r\n                      onClick={() => handleDelete(booking.id)}\r\n                      title=\"Löschen\"\r\n                    >\r\n                      X\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </Paper>\r\n      )}\r\n\r\n      {/* Benachrichtigungen */}\r\n      <Snackbar \r\n        open={showAlert} \r\n        autoHideDuration={6000} \r\n        onClose={() => setShowAlert(false)}\r\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n        sx={{ zIndex: 10000 }}\r\n      >\r\n        <Alert onClose={() => setShowAlert(false)} severity={alertSeverity} sx={{ width: '100%' }}>\r\n          {alertMessage}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Bookings; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}